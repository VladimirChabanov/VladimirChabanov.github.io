[TOC]

#### <span>29</span>. Студенты

<div id="testing" style="background-size: 40px 40px; background-image: -moz-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); background-image: -webkit-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); background-image: linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); box-shadow: 0 0 8px rgba(0,0,0,.3); width: 100%; margin: 0 auto; padding:15px; background-color: #4ea5cd; border-left:7px #3b8eb5 solid;">
<a href="#" style="text-decoration: none; font:16px 'Open Sans'; font-weight:600; color:#f4f0fc;">Ссылка для тренировки (скоро)</a>
</div>
***С++***

Опишите структуру с именем `Student`, содержащую следующие поля:

   - `name` — фамилия и первая буква имени (строка состоящая из латинских символов и пробела в формате: Persson М);
   - `group` — номер группы (целое число $[1...9]$);
   - `exams` — результаты экзаменов по шкале $[2...5]$ (словарь в котором ключ - это название предмета, значение - оценка по предмету. Список предметов: mathematics, physics, history, programming).

Напишите программу, в которой выполните следующие действия :

   1. Создайте массив/вектор студентов, состоящий из десяти структур типа `Student` и заполните его некоторыми данными по своему усмотрению;

   2. Для вывода на экран информации об одном студенте перегрузите оператор `<<` для пары типов `std::ostream` и `Student`. Информация должна выводится в следующем виде, например:

      ```
      +------------+-------+------+------+------+------+
      | Name       | Group | Math | Phys | Hist | Prog |
      +------------+-------+------+------+------+------+
      | Molyneux P | 1     | 5    | 5    | 5    | 5    |
      +------------+-------+------+------+------+------+
      ```

   3. Для вывода на экран информации о нескольких студентах перегрузите оператор `<<` для пары типов `std::ostream` и `std::vector<Student>`. Информация должна выводится в следующем виде, например для вектора из двух студентов:

      ```
      +----------+-------+------+------+------+------+
      | Name     | Group | Math | Phys | Hist | Prog |
      +----------+-------+------+------+------+------+
      | Meier S  | 1     | 5    | 5    | 5    | 5    |
      +----------+-------+------+------+------+------+
      | Newell G | 3     | 3    | 3    | 3    | 3    |
      +----------+-------+------+------+------+------+
      ```

   4. Для сортировки студентов используйте шаблон функции принимающий вектор из задания **Шаблон BozoSort** . Для этого перегрузите оператор сравнения `>` (или тот который использован в шаблоне функции) для пары типов `Student` и `Student`. При этом считается, что студент ***a*** больше студента ***b***, если поле `name` студента ***a*** [лексикографически](https://ru.stackoverflow.com/questions/489888/Что-такое-лексикографическое-сравнение-и-что-оно-собой-представляет) больше поля `name` студента ***b***, группа и оценки не играют роли.  

      <span style="color: #777">Примечание: `std::string` сравнивает строки лексикографически. </span>

   5. Выведите в консоль данные о всех студентах, имеющих оценку 2 хотя бы по одному из экзаменов. Студенты должны быть отсортированы по возрастанию;

   6. Затем, в отдельно строке, выведите слово "Expulsion" и следом информацию об одном рандомно выбранном студенте из списка двоечников. 

   7. Если студентов двоечников нет, выведите сообщение: "Not found".

**Формат ввода**  
Нет ввода

**Формат вывода**  
Согласно заданию.

**Пример 1**

<table><thead><tr><td><strong>Вывод</strong></td></tr></thead><tbody><tr><td>
<pre>+-----------+-------+------+------+------+------+
| Name      | Group | Math | Phys | Hist | Prog |
+-----------+-------+------+------+------+------+
| Akihiko K | 1     | 5    | 2    | 2    | 5    |
+-----------+-------+------+------+------+------+
| Carmack J | 3     | 5    | 4    | 2    | 5    |
+-----------+-------+------+------+------+------+
| Kojima H  | 9     | 3    | 2    | 4    | 4    |
+-----------+-------+------+------+------+------+
| Persson М | 3     | 2    | 3    | 4    | 3    |
+-----------+-------+------+------+------+------+</pre>
Expulsion
<pre>+-----------+-------+------+------+------+------+
| Name      | Group | Math | Phys | Hist | Prog |
+-----------+-------+------+------+------+------+
| Persson М | 3     | 2    | 3    | 4    | 3    |
+-----------+-------+------+------+------+------+</pre>
</td></tr></tbody></table>

**Пример 2**

<table><thead><tr><td><strong>Вывод</strong></td></tr></thead><tbody><tr><td>Not found</td></tr></tbody></table>



#### <span>30</span>. Loot Box

<div id="testing" style="background-size: 40px 40px; background-image: -moz-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); background-image: -webkit-linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); background-image: linear-gradient(135deg, rgba(255, 255, 255, .05) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .05) 50%, rgba(255, 255, 255, .05) 75%, transparent 75%, transparent); box-shadow: 0 0 8px rgba(0,0,0,.3); width: 100%; margin: 0 auto; padding:15px; background-color: #4ea5cd; border-left:7px #3b8eb5 solid;">
<a href="#" style="text-decoration: none; font:16px 'Open Sans'; font-weight:600; color:#f4f0fc;">Ссылка для тренировки (скоро)</a>
</div>

***С++***

Реализуйте структуру `Item` состоящую из 2 частей:

1. Элемент типа `ItemType`;
2. Объединение (`union`) состоящее из 4 элементов:
   - Элемент типа `Сoin`;
   - Элемент типа `Rune`;
   - Элемент типа `Weapon`;
   - Элемент типа `Armor`.

`ItemType` — перечисление (тут и далее `enum class`), которое может принимать одно из 4х значений: `СOIN`, `RUNE`, `WEAPON`, `ARMOR`. Применяется для того, чтобы запомнить, что именно хранит структура `Item`.
`Сoin` — структура состоящая из:

- Поля `count` определяющего количество монет (целое число $[1...2^9]$).

`Rune` — структура состоящая из:

- Поля `level` определяющего уровень руны (целое число $[0...10]$);
- Поля `element` определяющего тип стихии руны (перечисление `Element` - возможные значения [`FIRE`, `WATER`, `EARTH`, `AIR`]).

`Weapon` — структура состоящая из:

- Поля `damage` определяющего урон оружия (целое число $[1...2^9]$);
- Поля `critical` определяющего шанс критического удара в процентах (целое число $[0...100]$);
- Поля `durability` определяющего процент износа оружия (целое число $[0...100]$); 

`Armor` — структура состоящая из:

- Поля `guard` определяющего защиту от урона (целое число $[1...2^9]$);
- Поля `durability` определяющего процент износа брони (целое число $[0...100]$);

Вектору из элементов типа `Item` назначьте псевдоним `LootBox`. В дальнейшем коде используйте этот псевдоним.

Для работы с `LootBox` реализуйте функцию:

```C++
// Возвращет лутбокс с тремя случайными предметами
LootBox generateLootBox();
```

При этом каждый из предметов генерируется в соответствии с вероятностью указанной в таблице:

| Тип предмета | Параметры                                    | Вероятность, % |
| ------------ | -------------------------------------------- | -------------- |
| Coin         | count = 1000                                 | 50             |
| Rune         | level = 1; element = FIRE                    | 6              |
| Rune         | level = 1; element = WATER                   | 13             |
| Rune         | level = 1; element = EARTH                   | 7              |
| Rune         | level = 1; element = AIR                     | 14             |
| Rune         | level = 5; element = FIRE                    | 0.6            |
| Rune         | level = 5; element = WATER                   | 1.3            |
| Rune         | level = 5; element = EARTH                   | 0.7            |
| Rune         | level = 5; element = AIR                     | 1.4            |
| Rune         | level = 5; element = FIRE                    | 0.06           |
| Rune         | level = 5; element = WATER                   | 0.13           |
| Rune         | level = 5; element = EARTH                   | 0.07           |
| Rune         | level = 5; element = AIR                     | 0.14           |
| Weapon       | damage = 100; critical = 0; durability = 100 | 1.4            |
| Weapon       | damage = 75; critical = 50; durability = 100 | 1.4            |
| Armor        | guard = 50; durability = 100                 | 2.8            |

<details style="background-color: #fafafa;">
<summary>Как генерировать</summary>
    <ul><li>Можно воспользоваться методом "мешка" о котором написано <a href="https://habr.com/ru/post/354132/">тут</a>;</li>
        <li>Или генерировать случайное число в определённом диапазоне и по интревалу в который число попадёт выбирать предмет. Размер диапазона длжен быть пропорционален вероятности и диапазоны не должны пересекаться.<br><img src="https://gamedev.ru/files/images/lootdrop.png"><br><center><span >Источник рисунка <a  href="https://www.gamedev.ru/code/forum/?id=248754">gamedev.ru</a></span></center><br>Алгоритм примерно <a href="https://gist.github.com/Riateche/3038910">такой</a>, но требуется допилить под задачу;</li></ul>
</details>

Для работы с вышеуказанными типами перегрузите операторы:

1. Оператор префиксный `++` для типа `Item`. Оператор должен изменять содержимое переменной к которой применяется на случайное (в соответствии с таблицей) и возвращать новое значение.

2. Оператор `<<` для пары типов `LootBox` и `Item`. Оператор должен добавлять `Item` в  `LootBox` и возвращать изменённый `LootBox`.

3. Оператор `<<` для пары типов `std::ostream` и `Item`. Выводит в поток информацию о предмете, в зависимости от того, что находится в `Item`. Вывод оформить по своему желанию (например так):

   ```c++
   1000 gold          // для Coin
   Rune of fire 1 lvl // для Rune
   God Killer         // для Weapon damage = 100; critical = 0;
   Demon Slayer       // для Weapon damage = 75; critical = 50;
   Bronezhiletka      // для Armor
   ```

4. Оператор `<<` для пары типов `std::ostream` и `LootBox`. Выводит на экран все три предмета находящиеся в лутбоксе.

В основном коде программы:

0. По максимуму используйте перегруженные операторы, в том числе и внутри других операторов.

1.  Выведите сообщение: "Открыть лутбокс? Yes/No".
2. Если пользователь введёт Y или Yes (и маленькими тоже):

   - Создать и вывести на экран содержимое лутбокса;

   - Перейти к пункту 1.
3. Если пользователь введёт N или No (и маленькими тоже) - завершить программу.
4.  При любом другом вводе - перейти к пункту 1.

**Формат ввода** 
В ответ на вопрос: "Открыть лутбокс? Yes/No". В одной строке вводится слово состоящее из латинских символов.

**Формат вывода** 
Согласно заданию.

**Пример**

<table><thead><tr><td><strong>Вывод</strong></td></tr></thead><tbody><tr><td>Открыть лутбокс? Yes/No<br>y<br>1000 gold<br>1000 gold<br>1000 gold<br>Открыть лутбокс? Yes/No<br>yes<br>1000 gold<br>Rune of air 5 lvl<br>1000 gold<br>Открыть лутбокс? Yes/No<br>yep<br>Открыть лутбокс? Yes/No<br>No</td></tr></tbody></table>